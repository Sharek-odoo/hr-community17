<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="employee_direct_work_view_form" model="ir.ui.view">
        <field name="name">employee.direct.work.view.form</field>
        <field name="model">employee.direct.work</field>
        <field name="arch" type="xml">
            <form>
                <header>
                    <button string="Set to Draft" invisible="state not in ['confirm']" name="action_draft"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_manager"/>

                    <button string="Set to Draft" invisible="state not in ['submitted']" name="action_draft"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_department_manager"/>

                    <button string="Set to Draft" invisible="state not in ['cancel']" name="action_draft"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_user"/>

                    <button string="Submit" invisible="state not in ['draft']" name="action_submitted"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_user"/>

                    <button string="Confirm" invisible="state not in ['submitted']" name="action_confirmed"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_department_manager"/>

                    <button string="Approve" invisible="state not in ['confirm']" name="action_approved"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_manager"/>

                    <button string="Cancel" invisible="state not in ['draft']" name="action_cancel"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_user"/>

                    <button string="Cancel" invisible="state not in ['submitted']" name="action_cancel"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_department_manager"/>

                    <button string="Cancel" invisible="state not in ['confirm']" name="action_cancel"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_manager"/>
                    <button string="Cancel" invisible="state not in ['approved']" name="action_cancel"
                            type="object" class="oe_highlight"
                            groups="sharek_employee_direct_work.group_hr_direct_manager"/>

                    <field name="state" widget="statusbar" statusbar_visible="draft,submitted,confirm,approved"/>
                </header>
                <sheet>
                    <div class="row justify-content-between position-relative w-100 m-0 mb-2">
                        <div class="oe_title mw-75 ps-0 pe-2">
                            <h1 class="d-flex flex-row align-items-center">
                                <field name="name" class="display-4 text-break" readonly="1"/>
                            </h1>
                        </div>
                    </div>

                    <group>
                        <group>
                            <field name="employee_id" options="{'no_open': True, 'no_create': True}"
                                   readonly="state  not in ('draft')"/>
                            <field name="employee_no"/>
                            <field name="last_start_date" readonly="1"/>
                            <field name="direct_work_date" required="1" readonly="state  not in ('draft')"/>
                        </group>
                        <group>
                            <field name="date" readonly="1"/>
                            <field name="department_id"/>
                            <field name="job_id"/>
                        </group>
                    </group>

                    <notebook>
                        <page string="Notes">
                            <field name="note"/>
                        </page>
                    </notebook>
                </sheet>

                <div class="oe_chatter">
                    <field name="message_follower_ids" groups="base.group_user"/>
                    <field name="message_ids"/>
                </div>
            </form>
        </field>
    </record>

    <record id="employee_direct_work_view_tree" model="ir.ui.view">
        <field name="name">employee.direct.work.view.tree</field>
        <field name="model">employee.direct.work</field>
        <field name="arch" type="xml">
            <tree>
                <field name="date" optional="hide"/>
                <field name="employee_no"/>
                <field name="employee_id"/>
                <field name="department_id"/>
                <field name="job_id"/>
                <field name="direct_work_date"/>
            </tree>
        </field>
    </record>

    <record id="employee_direct_work_view_search" model="ir.ui.view">
        <field name="name">employee.direct.work.view.search</field>
        <field name="model">employee.direct.work</field>
        <field name="arch" type="xml">
            <search>
                <field name="employee_no"/>
                <field name="employee_id"/>
                <field name="job_id"/>
                <field name="department_id"/>
                <field name="date"/>
                <filter name="draft" string="Draft" domain="[('state', '=', 'draft')]"/>
                <filter name="sumbmited" string="Sumbmited" domain="[('state', '=', 'sumbmited')]"/>
                <filter name="approved" string="Approved" domain="[('state', '=', 'approved')]"/>

                <filter name="state" string="Status" context="{'group_by': 'state'}"/>
                <filter name="direct_work_date" string="Direct Work Date"
                        context="{'group_by': 'direct_work_date:month'}"/>
            </search>
        </field>
    </record>

    <record id="employee_direct_work_action" model="ir.actions.act_window">
        <field name="name">Direct Work</field>
        <field name="res_model">employee.direct.work</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem
            id="employee_direct_work_menu"
            name="Employee Direct Work"
            parent="hr.menu_hr_employee_payroll"
            action="employee_direct_work_action"
            groups="hr.group_hr_user"
            sequence="100"
    />

</odoo>